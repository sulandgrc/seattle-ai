<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SDEV 220 – Elementary Data Structures (Fall 2025) • Interactive Syllabus</title>
  <style>
    :root{
      --green:#036b37; /* deep green */
      --green-600:#059669; /* accent green */
      --black:#000;
      --white:#fff;
      --muted:#f5f7f6; /* very light for section backgrounds (still white-ish) */
    }
    html,body{margin:0;padding:0;background:var(--white);color:var(--black);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif;line-height:1.5}
    a{color:var(--green-600)}
    header.hero{
      background:linear-gradient(135deg,var(--green) 0%, #02482e 100%);
      color:var(--white);
      padding:2.25rem 1rem 1.5rem;
      position:sticky;top:0;z-index:50;
      box-shadow:0 2px 10px rgba(0,0,0,.15)
    }
    .container{max-width:1100px;margin:0 auto;padding:0 1rem}
    .title{display:flex;flex-wrap:wrap;align-items:center;gap:.75rem}
    .title h1{margin:0;font-size:1.6rem;letter-spacing:.3px}
    .badge{background:var(--white);color:var(--green);padding:.2rem .5rem;border-radius:999px;font-weight:700}
    nav.quick{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.75rem}
    nav.quick a{background:rgba(255,255,255,.15);color:#fff;text-decoration:none;padding:.4rem .6rem;border-radius:999px;font-size:.9rem;border:1px solid rgba(255,255,255,.25)}
    nav.quick a:focus,nav.quick a:hover{background:#fff;color:var(--green)}

    .grid{display:grid;grid-template-columns:1fr;gap:1rem;margin:1rem 0}
    @media(min-width:900px){.grid{grid-template-columns:2fr 1fr}}

    .card{background:var(--white);border:1px solid #e6e6e6;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.04)}
    .card .card-h{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.2rem;border-bottom:1px solid #eee}
    .card .card-h h2{margin:0;font-size:1.15rem}
    .card .card-b{padding:1rem 1.2rem}

    .pill{display:inline-block;border:1px solid var(--green);color:var(--green);padding:.15rem .5rem;border-radius:999px;font-size:.8rem}
    .btn{cursor:pointer;border:1px solid var(--black);background:var(--black);color:var(--white);padding:.55rem .8rem;border-radius:10px}
    .btn.secondary{background:var(--white);color:var(--black)}
    .btn.ghost{background:transparent;border-color:var(--green);color:var(--green)}
    .btn:focus,.btn:hover{filter:brightness(0.9)}

    /* Accordion */
    details{border:1px solid #e5e7eb;border-radius:14px;overflow:hidden;background:#fff}
    details+details{margin-top:.75rem}
    summary{list-style:none;cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:1rem 1.2rem;font-weight:700;background:linear-gradient(0deg,#fafafa,#fff)}
    summary::-webkit-details-marker{display:none}
    details[open] summary{border-bottom:1px solid #eee}
    .acc-body{padding:1rem 1.2rem}

    .kvs{display:grid;grid-template-columns:1fr;gap:.75rem}
    .kv{display:grid;grid-template-columns:140px 1fr;gap:.75rem}

    .two-col{display:grid;grid-template-columns:1fr;gap:1rem}
    @media(min-width:700px){.two-col{grid-template-columns:1fr 1fr}}

    /* Schedule */
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px solid #eee;padding:.6rem;text-align:left}
    thead th{position:sticky;top:0;background:#f9faf9;border-bottom:2px solid var(--green)}
    .chip{display:inline-block;background:var(--green);color:#fff;border-radius:999px;padding:.15rem .5rem;font-size:.75rem}

    /* Search */
    .searchbar{display:flex;gap:.5rem;align-items:center}
    .searchbar input{flex:1;padding:.6rem .7rem;border:1px solid #ccc;border-radius:10px}

    /* Footer */
    footer{padding:2rem 1rem;color:#333}

    /* Print */
    @media print{
      header.hero, nav.quick, .tools, .hide-print{display:none !important}
      .card, details{box-shadow:none;border-color:#999}
    }
  </style>
</head>
<body>
  <header class="hero" role="banner">
    <div class="container">
      <div class="title">
        <h1>SDEV 220 – Elementary Data Structures <span class="badge">Fall 2025</span></h1>
      </div>
      <nav class="quick" aria-label="Quick navigation">
        <a href="#course-info">Course Info</a>
        <a href="#instructor">Instructor</a>
        <a href="#materials">Materials</a>
        <a href="#outcomes">Outcomes</a>
        <a href="#policies">Policies</a>
        <a href="#assignments">Assignments</a>
        <a href="#schedule">Schedule</a>
        <a href="#grading">Grading</a>
        <a href="#resources">Resources</a>
      </nav>
    </div>
  </header>

  <main class="container" id="main">
    <section class="grid tools hide-print" aria-label="Tools">
      <div class="card">
        <div class="card-h"><h2>Upcoming • What’s next?</h2></div>
        <div class="card-b">
          <div class="two-col">
            <div>
              <h3 style="margin:.2rem 0">Next Class Meeting</h3>
              <p id="nextClass">Calculating…</p>
              <button class="btn ghost" id="addClassToCal" aria-label="Add class time to your calendar">Add to Calendar (.ics)</button>
            </div>
            <div>
              <h3 style="margin:.2rem 0">Next Exam</h3>
              <p id="nextExam">Calculating…</p>
              <button class="btn ghost" id="addExamToCal" aria-label="Add next exam to calendar">Add Exam to Calendar (.ics)</button>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-h"><h2>Search the syllabus</h2></div>
        <div class="card-b">
          <div class="searchbar"><input id="syllabusSearch" type="search" placeholder="Try: recursion, AI usage, late policy, Zoom…" aria-label="Search the syllabus"><button class="btn" id="clearSearch">Clear</button></div>
          <p style="margin:.6rem 0 0;font-size:.9rem">Matches are highlighted and sections auto-expand.</p>
        </div>
      </div>
      <div class="card">
        <div class="card-h"><h2>Quick Actions</h2></div>
        <div class="card-b">
          <div class="two-col">
            <button class="btn" id="copyZoom">Copy Zoom Details</button>
            <a class="btn secondary" href="mailto:SUland@greenriver.edu?subject=SDEV 220" aria-label="Email the instructor">Email Instructor</a>
          </div>
        </div>
      </div>
    </section>

    <section id="course-info" class="card" aria-labelledby="course-info-h">
      <div class="card-h"><h2 id="course-info-h">Course Info</h2><span class="pill">Item # 5890</span></div>
      <div class="card-b">
        <div class="kvs">
          <div class="kv"><strong>Modality</strong><div>Synchronous Zoom MTWR 3:00–3:50 PM • Friday asynchronous 1‑hour lab/quiz</div></div>
          <div class="kv"><strong>Zoom</strong><div>Meeting ID: <code>854 4193 6580</code> • Pass: <code>SDEV220</code></div></div>
          <div class="kv"><strong>Location</strong><div>Green River College • Auburn, WA</div></div>
        </div>
      </div>
    </section>

    <section id="instructor" class="card" aria-labelledby="instructor-h">
      <div class="card-h"><h2 id="instructor-h">Instructor</h2></div>
      <div class="card-b">
        <div class="kvs">
          <div class="kv"><strong>Name</strong><div>Susan Uland</div></div>
          <div class="kv"><strong>Email</strong><div><a href="mailto:SUland@greenriver.edu">SUland@greenriver.edu</a></div></div>
          <div class="kv"><strong>Office Hours</strong><div>Monday 10–1 PM; Wednesday 10–12 PM (Zoom or by appointment)</div></div>
          <div class="kv"><strong>Phone</strong><div>(253) 887‑5912 • Microsoft Teams</div></div>
        </div>
      </div>
    </section>

    <section id="materials" class="card" aria-labelledby="materials-h">
      <div class="card-h"><h2 id="materials-h">Course Materials</h2></div>
      <div class="card-b">
        <ul>
          <li>Working computer with <strong>Java 21</strong></li>
          <li><strong>IntelliJ IDEA</strong> (IDE)</li>
          <li>Recommended: <em>Building Java Programs</em>, 4th or 5th ed., Stepp & Reges</li>
          <li>Additional resources on Canvas: <a href="https://egator.greenriver.edu" target="_blank" rel="noopener">egator.greenriver.edu</a></li>
        </ul>
      </div>
    </section>

    <section id="outcomes" class="card" aria-labelledby="outcomes-h">
      <div class="card-h"><h2 id="outcomes-h">Course Description & Outcomes</h2></div>
      <div class="card-b">
        <p>A continuation of SDEV 219 emphasizing data abstraction and encapsulation (interfaces, recursion, generics, collections, linked lists, binary search trees). Prerequisite: SDEV 219 (≥ 2.0) or instructor consent. Expect ~10 hours/week outside class.</p>
        <ul>
          <li>Design & implement list, set, and map data structures in Java.</li>
          <li>Implement and debug recursive algorithms.</li>
          <li>Analyze complexity using Big‑O notation.</li>
          <li>Integrate multiple design aspects to solve CS problems.</li>
          <li>Use inheritance and overriding; demonstrate polymorphism.</li>
          <li>Define and use interfaces; instantiate generics.</li>
          <li>Use exceptions and basic I/O.</li>
          <li>Implement linked lists, stacks, queues, and binary search trees.</li>
        </ul>
        <p><strong>Program Outcomes:</strong> Build secure, efficient code; solve data problems with programming.</p>
      </div>
    </section>

    <section id="policies" class="card" aria-labelledby="policies-h">
      <div class="card-h"><h2 id="policies-h">Course Policies</h2></div>
      <div class="card-b">
        <details>
          <summary>Attendance & Engagement</summary>
          <div class="acc-body">
            <p>Class sessions are on Zoom during the scheduled days/times. Video on is preferred to support participation and communication. Need a webcam/hotspot? Contact Holman Library: <a href="mailto:ssuccess@greenriver.edu">ssuccess@greenriver.edu</a>.</p>
          </div>
        </details>
        <details>
          <summary>Late Work Policy</summary>
          <div class="acc-body">
            <ul>
              <li>24‑hour grace period — no deduction.</li>
              <li>Up to 3 days late — up to 50% credit.</li>
              <li>After 3 days — no credit.</li>
            </ul>
            <p>Alternate arrangements may be approved if you contact the instructor <em>before</em> the due date. No day‑of extensions.</p>
          </div>
        </details>
        <details>
          <summary>Exams (In‑Person at Auburn Center)</summary>
          <div class="acc-body">
            <ul>
              <li>Exam #1 — <strong>Oct 16</strong>, 3:00–4:00 PM</li>
              <li>Exam #2 — <strong>Nov 6</strong>, 3:00–4:00 PM</li>
              <li>Exam #3 — <strong>Dec 4</strong>, 3:00–4:00 PM</li>
            </ul>
          </div>
        </details>
        <details>
          <summary>Academic Honesty</summary>
          <div class="acc-body">
            <p>All individual work and exams must be your own. Plagiarism (including AI‑generated code submitted as your own) violates academic integrity and may result in a zero. You may not post individual assignments online or receive line‑by‑line walkthroughs from others. If you adapt 3–5 lines from a source, cite it.</p>
          </div>
        </details>
        <details>
          <summary>Guidelines for AI Usage</summary>
          <div class="acc-body">
            <ol>
              <li><strong>Enhancement, not replacement</strong> — use AI to learn, not to complete work.</li>
              <li><strong>Develop your skillset</strong> — be able to code independently.</li>
              <li><strong>Academic integrity</strong> — do not submit AI‑generated code as your own.</li>
              <li><strong>Discuss ethically</strong> — talk about effective, ethical AI use while maintaining integrity.</li>
            </ol>
            <p><em>Your responsibility:</em> Engage authentically; seek help early (office hours, tutoring) if you struggle to complete work without AI.</p>
          </div>
        </details>
      </div>
    </section>

    <section id="assignments" class="card" aria-labelledby="assignments-h">
      <div class="card-h"><h2 id="assignments-h">Assignments & Weighting</h2></div>
      <div class="card-b">
        <table aria-label="Assignment categories and weights">
          <thead><tr><th>Category</th><th>Details</th><th>Weight</th></tr></thead>
          <tbody>
            <tr><td>Individual Assignments</td><td>Lowest dropped</td><td>25%</td></tr>
            <tr><td>Learning Practice Assignments</td><td>Lowest three dropped</td><td>25%</td></tr>
            <tr><td>Three Exams (in person, Auburn Center)</td><td>Exam #1, #2, #3</td><td>45%</td></tr>
            <tr><td>Weekly Participation</td><td>Lowest three dropped</td><td>5%</td></tr>
          </tbody>
        </table>
        <details style="margin-top:.75rem">
          <summary>How to earn participation</summary>
          <div class="acc-body">
            <ul>
              <li>Attend and participate in a live Zoom session (camera on, chat, Q&A).</li>
              <li>Submit a short video walkthrough of a learning practice assignment.</li>
              <li>Attend a Friday Lab in AC 310 (at least one hour; check availability).</li>
            </ul>
          </div>
        </details>
      </div>
    </section>

    <section id="schedule" class="card" aria-labelledby="schedule-h">
      <div class="card-h"><h2 id="schedule-h">Tentative Course Schedule</h2></div>
      <div class="card-b">
        <div class="two-col" style="align-items:end">
          <div>
            <label class="pill" for="filter">Quick filter</label>
            <select id="filter" style="display:block;margin-top:.35rem;padding:.5rem;border:1px solid #ccc;border-radius:10px">
              <option value="all">Show all</option>
              <option value="exam">Exams only</option>
              <option value="holiday">Holidays only</option>
              <option value="topic">Topics only</option>
            </select>
          </div>
          <div style="text-align:right">
            <span class="chip" aria-label="Subject to change">Subject to change</span>
          </div>
        </div>
        <table id="schedTable" style="margin-top:.6rem" aria-describedby="schedule-h">
          <thead><tr><th style="width:70px">Week</th><th>Topics</th><th>Tests / Holidays</th></tr></thead>
          <tbody>
            <tr data-type="topic"><td>1</td><td>Review / JUnit Testing</td><td></td></tr>
            <tr data-type="topic"><td>2</td><td>ArrayList Implementation, Big‑O Notation</td><td></td></tr>
            <tr data-type="topic"><td>3</td><td>Iterators / Generics / Enums</td><td></td></tr>
            <tr data-type="topic"><td>4</td><td>Recursion / Recursive Search & Sort</td><td data-type="holiday">Oct 13 – In‑Service Day<br><span class="chip" data-type="exam">Exam #1 – Oct 16</span></td></tr>
            <tr data-type="topic"><td>5</td><td>Linked List Implementation</td><td></td></tr>
            <tr data-type="topic"><td>6</td><td>Linked List Implementation</td><td></td></tr>
            <tr data-type="topic"><td>7</td><td>Linked List Implementation</td><td><span class="chip" data-type="exam">Exam #2 – Nov 6</span></td></tr>
            <tr data-type="topic"><td>8</td><td>Binary Trees</td><td data-type="holiday">Nov 11 – Veteran’s Day</td></tr>
            <tr data-type="topic"><td>9</td><td>Binary Tree Implementation</td><td></td></tr>
            <tr data-type="topic"><td>10</td><td>Binary Tree Implementation</td><td data-type="holiday">Nov 27–28 – Thanksgiving</td></tr>
            <tr data-type="topic"><td>11</td><td>Hash Tables</td><td><span class="chip" data-type="exam">Dec 4 – Exam #3</span></td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="grading" class="card" aria-labelledby="grading-h">
      <div class="card-h"><h2 id="grading-h">Grading Scale</h2></div>
      <div class="card-b">
        <p>Your grade rounds up to the nearest tenth (e.g., 3.21 → 3.3).</p>
        <details open>
          <summary>View 0.0 – 4.0 conversion</summary>
          <div class="acc-body">
            <div class="two-col">
              <ul>
                <li>95–100 → 4.0</li>
                <li>94 → 3.9</li>
                <li>93 → 3.8</li>
                <li>92 → 3.7</li>
                <li>91 → 3.6</li>
                <li>90 → 3.5</li>
                <li>89 → 3.4</li>
                <li>88 → 3.3</li>
                <li>87 → 3.2</li>
                <li>86 → 3.1</li>
                <li>85 → 3.0</li>
                <li>84 → 2.9</li>
                <li>83 → 2.8</li>
                <li>82 → 2.7</li>
              </ul>
              <ul>
                <li>81 → 2.6</li>
                <li>80 → 2.5</li>
                <li>79 → 2.4</li>
                <li>78 → 2.3</li>
                <li>77 → 2.2</li>
                <li>76 → 2.1</li>
                <li>75 → 2.0</li>
                <li>74 → 1.9</li>
                <li>73 → 1.8</li>
                <li>72 → 1.7</li>
                <li>71 → 1.6</li>
                <li>70 → 1.5</li>
                <li>69 → 1.4</li>
                <li>68 → 1.3</li>
                <li>67 → 1.2</li>
                <li>66 → 1.1</li>
                <li>65 → 1.0</li>
                <li>0–64 → 0.0</li>
              </ul>
            </div>
          </div>
        </details>
      </div>
    </section>

    <section id="resources" class="card" aria-labelledby="resources-h">
      <div class="card-h"><h2 id="resources-h">Student Support & Accessibility</h2></div>
      <div class="card-b">
        <details>
          <summary>Counseling Services</summary>
          <div class="acc-body">
            <p>Free, confidential short‑term counseling and wellness education by licensed professionals. Learn more or schedule: <a href="https://www.greenriver.edu/campus/campus-resources/counseling-services/" target="_blank" rel="noopener">Counseling Services</a>.</p>
          </div>
        </details>
        <details>
          <summary>Financial Assistance (Benefits Hub)</summary>
          <div class="acc-body">
            <ul>
              <li>FAFSA/WASFA, utilities, housing navigation, emergencies</li>
              <li>Food resources, coaching, public benefits (ORCA Lift, SNAP, healthcare)</li>
            </ul>
          </div>
        </details>
        <details>
          <summary>Disability Support Services</summary>
          <div class="acc-body">
            <p>Alternate formats available via DSS: 253‑833‑9111 x2631; TTY 253‑288‑3359; <a href="mailto:dss@greenriver.edu">dss@greenriver.edu</a>. Green River College is an equal opportunity educator and employer.</p>
          </div>
        </details>
      </div>
    </section>

    <footer>
      <div class="container">
        <p style="opacity:.8">© 2025 Green River College • SDEV 220 Interactive Syllabus</p>
      </div>
    </footer>
  </main>

  <script>
    // --- Utility: date helpers (PST/PDT friendly using local time) ---
    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'America/Los_Angeles';

    function formatDT(d){
      return new Intl.DateTimeFormat(undefined,{dateStyle:'full', timeStyle:'short'}).format(d);
    }
    function msUntil(d){ return d.getTime() - Date.now(); }
    function humanDiff(ms){
      if(ms < 0) return 'in progress or past';
      const s = Math.floor(ms/1000), m=Math.floor(s/60), h=Math.floor(m/60), d=Math.floor(h/24);
      const hh=h%24, mm=m%60, ss=s%60;
      return `${d}d ${hh}h ${mm}m ${ss}s`;
    }

    // --- Next class meeting (MTWR 3:00 PM–3:50 PM) ---
    function nextClassDate(){
      const now = new Date();
      const day = now.getDay(); // 0=Sun..6=Sat
      const classDays = [1,2,3,4]; // Mon-Thu
      let candidate = new Date(now);
      // set to 3:00 PM local
      function setClassTime(d){ d.setHours(15,0,0,0); }
      setClassTime(candidate);
      // If today is a class day and before 3pm, use today; else find next Mon-Thu
      if(!(classDays.includes(day) && now < candidate)){
        // advance to next class day
        for(let i=1;i<=7;i++){
          const d = new Date(now.getFullYear(), now.getMonth(), now.getDate()+i);
          if(classDays.includes(d.getDay())){ candidate = d; setClassTime(candidate); break; }
        }
      }
      return candidate;
    }

    const nextClassEl = document.getElementById('nextClass');
    const ncd = nextClassDate();
    nextClassEl.textContent = `${formatDT(ncd)} • starts in ${humanDiff(msUntil(ncd))}`;
    setInterval(()=>{ nextClassEl.textContent = `${formatDT(ncd)} • starts in ${humanDiff(msUntil(ncd))}`; },1000);

    // --- Next Exam Countdown ---
    const examDates = [
      new Date('2025-10-16T15:00:00'),
      new Date('2025-11-06T15:00:00'),
      new Date('2025-12-04T15:00:00')
    ];
    function nextExamDate(){
      const now = Date.now();
      for(const d of examDates){ if(d.getTime() > now) return d; }
      return null;
    }
    const nextExamEl = document.getElementById('nextExam');
    const ned = nextExamDate();
    if(ned){
      nextExamEl.textContent = `${formatDT(ned)} • starts in ${humanDiff(msUntil(ned))}`;
      setInterval(()=>{ nextExamEl.textContent = `${formatDT(ned)} • starts in ${humanDiff(msUntil(ned))}`; },1000);
    } else {
      nextExamEl.textContent = 'All exams completed.';
      document.getElementById('addExamToCal').disabled = true;
    }

    // --- Simple ICS download helpers ---
    function downloadICS({title, description, location, start, end}){
      function toICSDate(d){
        const pad=n=>String(n).padStart(2,'0');
        return `${d.getUTCFullYear()}${pad(d.getUTCMonth()+1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;
      }
      const uid = Math.random().toString(36).slice(2)+"@sdev220";
      const ics = [
        'BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//SDEV220//Interactive Syllabus//EN','CALSCALE:GREGORIAN',
        'BEGIN:VEVENT',
        `UID:${uid}`,
        `DTSTAMP:${toICSDate(new Date())}`,
        `DTSTART:${toICSDate(start)}`,
        `DTEND:${toICSDate(end)}`,
        `SUMMARY:${title}`,
        `LOCATION:${location||''}`,
        `DESCRIPTION:${(description||'').replace(/\n/g,'\\n')}`,
        'END:VEVENT','END:VCALENDAR'
      ].join('\r\n');
      const blob = new Blob([ics], {type:'text/calendar'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = `${title.replace(/[^a-z0-9]+/gi,'_')}.ics`; a.click();
      URL.revokeObjectURL(url);
    }

    document.getElementById('addClassToCal').addEventListener('click', ()=>{
      const start = nextClassDate();
      const end = new Date(start.getTime()+50*60000);
      downloadICS({
        title:'SDEV 220 Class Meeting',
        description:'Synchronous Zoom class. Meeting ID: 854 4193 6580, Pass: SDEV220',
        location:'Zoom', start, end
      });
    });

    document.getElementById('addExamToCal').addEventListener('click', ()=>{
      if(!ned) return;
      const end = new Date(ned.getTime()+60*60000);
      downloadICS({
        title:'SDEV 220 Exam',
        description:'In‑person at Auburn Center. Arrive early. Duration 60 minutes.',
        location:'Auburn Center', start: ned, end
      });
    });

    // --- Copy Zoom details ---
    document.getElementById('copyZoom').addEventListener('click', async ()=>{
      const text = 'SDEV 220 Zoom\nMeeting ID: 854 4193 6580\nPasscode: SDEV220\nTime: MTWR 3:00–3:50 PM';
      try{ await navigator.clipboard.writeText(text); alert('Zoom details copied to clipboard.'); }catch(e){ alert('Could not copy.'); }
    });

    // --- Schedule filtering ---
    const select = document.getElementById('filter');
    select.addEventListener('change', ()=>{
      const mode = select.value; // all | exam | holiday | topic
      document.querySelectorAll('#schedTable tbody tr').forEach(tr=>{
        const tests = tr.querySelector('td:nth-child(3)');
        const hasExam = tests && tests.querySelector('[data-type="exam"]');
        const isHoliday = (tests && tests.getAttribute('data-type')==='holiday');
        if(mode==='all') tr.style.display='';
        else if(mode==='exam') tr.style.display = hasExam ? '' : 'none';
        else if(mode==='holiday') tr.style.display = isHoliday ? '' : 'none';
        else if(mode==='topic') tr.style.display = (!hasExam && !isHoliday) ? '' : 'none';
      });
    });

    // --- In‑document search with highlights ---
    const searchInput = document.getElementById('syllabusSearch');
    const clearBtn = document.getElementById('clearSearch');

    function removeMarks(){ document.querySelectorAll('mark[data-hit]').forEach(m=>{
      const t = document.createTextNode(m.textContent); m.replaceWith(t);
    }); }

    function expandAllParents(node){
      let p = node.parentElement;
      while(p){ if(p.tagName==='DETAILS') p.open = true; p = p.parentElement; }
    }

    function search(term){
      removeMarks();
      if(!term){ return; }
      const walker = document.createTreeWalker(document.getElementById('main'), NodeFilter.SHOW_TEXT, {
        acceptNode(node){
          const s = node.nodeValue.trim();
          if(!s) return NodeFilter.FILTER_REJECT;
          if(node.parentElement && ['SCRIPT','STYLE'].includes(node.parentElement.tagName)) return NodeFilter.FILTER_REJECT;
          return s.toLowerCase().includes(term.toLowerCase()) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
        }
      });
      const hits=[];
      while(walker.nextNode()){
        const n = walker.currentNode;
        const idx = n.nodeValue.toLowerCase().indexOf(term.toLowerCase());
        if(idx>-1){
          const before = n.nodeValue.slice(0,idx);
          const match = n.nodeValue.slice(idx, idx+term.length);
          const after = n.nodeValue.slice(idx+term.length);
          const frag = document.createDocumentFragment();
          frag.append(before ? document.createTextNode(before):document.createTextNode(''));
          const mark = document.createElement('mark'); mark.dataset.hit='1'; mark.textContent = match; mark.style.background = '#b9f3cf'; mark.style.padding='0 .1em';
          frag.append(mark); frag.append(document.createTextNode(after));
          n.parentNode.replaceChild(frag,n);
          expandAllParents(mark);
          hits.push(mark);
        }
      }
      if(hits[0]){ hits[0].scrollIntoView({behavior:'smooth', block:'center'}); }
    }

    searchInput.addEventListener('input', ()=> search(searchInput.value));
    clearBtn.addEventListener('click', ()=>{ searchInput.value=''; removeMarks(); searchInput.focus(); });
  </script>
</body>
</html>
